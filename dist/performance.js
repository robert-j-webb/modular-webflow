"use strict";(()=>{gsap.registerPlugin(ScrollTrigger);$(document).ready(function(){if(window.location.href.endsWith("/performance")){let e=()=>{let t=$("#ootb_logo"),a=$("#bar-slow_1"),n=$("#bar-slow_2"),s=$("#bar-slow_3"),c=$("#max_logo"),l=$("#bar-fast_1"),d=$("#bar-fast_2"),m=$("#bar-fast_3"),b=$("#headers"),p=$("#numbers"),f=$("#grid"),i=.7,r=gsap.timeline({defaults:{ease:Power2.easeOut}});return r.to($(".headerb_stage-2"),{opacity:1}),r.fromTo([t,c,b,p],{opacity:0,xPercent:-15},{opacity:1,xPercent:0,duration:.5}),r.fromTo(f,{scaleY:0},{scaleY:1,duration:.5},"<"),r.addLabel("bars-start","<0.2"),r.fromTo(s,{scaleX:0},{scaleX:1,duration:i},"bars-start"),r.fromTo(n,{scaleX:0},{scaleX:.428,duration:i},"<"),r.fromTo(a,{scaleX:0},{scaleX:.295,duration:i},"<"),r.to(n,{scaleX:1,duration:i}),r.to(a,{scaleX:.695,duration:i},"<"),r.to(a,{scaleX:1,duration:i}),r.fromTo(m,{scaleX:0},{scaleX:1,duration:i},"bars-start"),r.fromTo(d,{scaleX:0},{scaleX:1,duration:i},"<"),r.fromTo(l,{scaleX:0},{scaleX:1,duration:i},"<"),r};gsap.timeline({}).add(e())}let w=".perf2_model-mask",E,P;function C(e){return e.toLocaleString("en")}let _=(e,o)=>{$(e).each(function(){let t=$(this).text().trim().replace(/,/g,""),a=parseFloat(t)||0,n=parseFloat(o);if(console.log(n),!isNaN(n)&&a!==n){let s={val:a},c=1;console.log(c);let l=()=>{let d=C(parseFloat(s.val.toFixed(c)));$(this).text(d)};gsap.fromTo(s,{val:a},{val:n,duration:.7,ease:Power1.easeOut,onUpdate:l})}})},g=(e,o)=>{$(e).each(function(){gsap.to(e,{text:o,duration:.5,ease:Power1.easeOut})})};function x(e,o){let{activeIndex:t,slides:a}=e,n=a[t],s=l=>{let d=$(l).find(w),m=d.find("p").outerHeight();gsap.to(d,{height:m})},c=gsap.timeline({onComplete:()=>{o&&s(n)}});a.forEach(l=>{c.to($(l).find(w),{height:0,duration:.2},"<")})}function v(e){let o=e.swiper1.realIndex,t=$(e.swiper1.slides[o]),a=$("[stat-number]"),n=$("[model-name-full]"),s=$("[instance-name-full]"),c=$(".perf2_slider-2 .perf2_model-mask p"),l=[$("[data-instance-1-short]").text(),$("[data-instance-2-short]").text(),$("[data-instance-3-short]").text()],d=t.find("[data-model-full]").text(),m=[t.attr("data-instance-1-full"),t.attr("data-instance-2-full"),t.attr("data-instance-3-full")],b=[t.attr("data-performance-1-val"),t.attr("data-performance-2-val"),t.attr("data-performance-3-val")],p=e.swiper2.realIndex;c.each(function(f,i){console.log(f),g($(i),m[f])}),_(a,b[p]),g(n,d),g(s,l[p]+" "+m[p])}let u={swiper1:N(".perf2_slider-1",{}),swiper2:N(".perf2_slider-2")},h=0,T,y=new IntersectionObserver(e=>{e[0].isIntersecting&&(T=new Date,y.disconnect())},{root:null,threshold:.5});y.observe(document.querySelector(".perf2_slider-1")),window.addEventListener("beforeunload",()=>{let e=Math.round((new Date-T)/1e3);amplitude.track("timeSpentOnPerformance",{timeInSeconds:e}),amplitude.track("totalClicksOnPerformance",{count:h})});function N(e,o){return new Swiper(e,{slidesPerView:1,direction:"vertical",observer:!0,slideToClickedSlide:!0,init:!1,threshold:40,freeMode:{enabled:!0,sticky:!0},on:{init:function(){x(this,!0)}},mousewheel:{thresholdDelta:20},...o})}for(let e in u)if(u.hasOwnProperty(e)){let o=u[e],t;o.on("slideChange",function(){let a=this.slides[this.activeIndex]?.innerText;clearTimeout(t),t=setTimeout(()=>{h=h+1,amplitude.track("performanceSelected",{modelOrInstance:a}),x(this,!0),v(u)},300)}),o.init()}let S=gsap.timeline({scrollTrigger:{trigger:$(".perf2"),start:"center bottom",onEnter:()=>{u.swiper1.slideTo(5,800,v(u)),u.swiper2.slideTo(1,800)}}})});})();
